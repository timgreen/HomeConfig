---
- name: ensure sysctl
  import_role:
    name: package
  vars:
    package_name:
      # https://command-not-found.com/sysctl
      Archlinux: procps-ng
      default: procps
  tags:
  - swappiness

- name: set swappiness value to {{ swappiness }}
  command: sysctl vm.swappiness={{ swappiness }}
  when: "{{ lookup('file', '/proc/sys/vm/swappiness') }} != {{ swappiness }}"
  become: yes
  tags:
  - swappiness
